(function(a){a.fn.backgroundCanvas=function(){a(this).each(function(){var i=a(this);a.browser.version=a.browser.msie&&parseInt(a.browser.version)==6&&window.XMLHttpRequest?"7.0":a.browser.version;i.css("background-color","transparent");i.css("border-color","transparent");i.css("background-image","none");var f=i.css("border-top-width");if(i.css("border-top-style")=="none"){f="0px"}var h=i.css("border-bottom-width");if(i.css("border-left-style")=="none"){h="0px"}var k=i.css("padding-top");var c=i.css("padding-bottom");var e=i.css("padding-left");var d=i.css("padding-right");i.css("padding-top","0px");i.css("padding-bottom","0px");i.css("padding-left","0px");i.css("padding-right","0px");i.wrapInner('<div class="jbgContentDiv" style="width:auto; height:auto; border: 0px transparent solid; display:block; position:relative; z-index:2;"></div>');var b=i.children(".jbgContentDiv");b.css("padding-top",k);b.css("padding-bottom",c);b.css("padding-left",e);b.css("padding-right",d);if(a.browser.msie){switch(f){case"thin":f="2px";case"medium":f="4px";case"thick":f="6px"}switch(h){case"thin":h="2px";case"medium":h="4px";case"thick":h="6px"}var g=document.createElement("div");g.className="jbgCanvasDiv";g.style.position="relative";g.style.display="block";g.style.height="0px";g.style.width="0px";g.style.top="-"+f;g.style.left="-"+h;g.setAttribute("z-index","0");var j=document.createElement("canvas");j.className="jbgCanvas";j.style.height="0px";j.style.width="0px";j.setAttribute("z-index","-1");j=G_vmlCanvasManager.initElement(j);i.get(0).insertBefore(g,i.get(0).firstChild);g.appendChild(j)}else{i.prepend('<div class="jbgCanvasDiv" style="display:block; position:relative; top:-'+f+"; left:-"+h+'; width:0px; height:0px;  z-index:0;"><canvas class="jbgCanvas" style="width:0px; height:0px; z-index:-1;" ></canvas></div>')}});return this};a.fn.backgroundCanvasPaint=function(b){a(this).each(function(){var j=a(this);var e=j.children(".jbgCanvasDiv");var i=e.children(".jbgCanvas");var g=j.children(".jbgContentDiv");if(i.length==0){return this}var f=i.get(0);if(a.browser.msie){if(parseInt(jQuery.browser.version)<7){i.width("0px");i.height("0px");e.css("width","0px");e.css("height","0px");e.css("margin-bottom","0px");e.css("margin-right","0px");g.css("width","");g.css("height","")}}var h=j.outerWidth();var c=j.outerHeight();if(!a.browser.msie){i.width(h+".4px");i.height(c+".4px")}else{if(parseInt(jQuery.browser.version)<7){g.css("width",h+".4px");g.css("height",c+".4px");e.css("margin-bottom","-"+c+".4px");e.css("margin-right","-"+h+".4px");e.css("width",h+".4px");e.css("height",c+".4px")}}if(f.getContext){f.width=h;f.height=c;var d=f.getContext("2d");b(d,h,c,f,i,e,g,j)}else{alert("can't create context")}});return this};a.canvasPaint={roundedRect:function(j,k){k=jQuery.extend({width:0,radius:0,border:0,stroke:false,fill:true,adjustRadius:true},k);k=jQuery.extend({x:0,y:0,height:k.width,radiusTL:k.radius,radiusTR:k.radius,radiusBL:k.radius,radiusBR:k.radius,borderL:k.border,borderR:k.border,borderT:k.border,borderB:k.border},k);if(k.adjustRadius){k.radiusTL=Math.max(k.radiusTL-((k.borderT+k.borderL)/2),0);k.radiusTR=Math.max(k.radiusTR-((k.borderT+k.borderR)/2),0);k.radiusBL=Math.max(k.radiusBL-((k.borderB+k.borderL)/2),0);k.radiusBR=Math.max(k.radiusBR-((k.borderB+k.borderR)/2),0)}var f=k.x+k.borderL;var e=k.y+k.borderT;var c=k.width-k.borderL-k.borderR;var i=k.height-k.borderT-k.borderB;var h=k.radiusTL*0.3333;var d=k.radiusTR*0.3333;var b=k.radiusBL*0.3333;var g=k.radiusBR*0.3333;j.beginPath();j.moveTo(f,e+k.radiusTL);j.lineTo(f,e+i-k.radiusBL);j.bezierCurveTo(f,e+i-b,f+b,e+i,f+k.radiusBL,e+i);j.lineTo(f+c-k.radiusBR,e+i);j.bezierCurveTo(f+c-g,e+i,f+c,e+i-g,f+c,e+i-k.radiusBR);j.lineTo(f+c,e+k.radiusTR);j.bezierCurveTo(f+c,e+d,f+c-d,e,f+c-k.radiusTR,e);j.lineTo(f+k.radiusTL,e);j.bezierCurveTo(f+h,e,f,e+h,f,e+k.radiusTL);if(k.stroke){j.stroke()}if(k.fill){j.fill()}},roundTab:function(m,n){n=jQuery.extend({x:0,y:0,width:0,radiusLeft:0,radiusRight:0,bottomRadiusLeft:0,bottomRadiusRight:0,offsetLeft:0,offsetRight:0,border:0,stroke:false,fill:true,adjustRadius:true},n);n=jQuery.extend({height:n.width},n);if(n.adjustRadius){n.radiusLeft=n.radiusLeft-n.border;n.radiusRight=n.radiusRight-n.border;n.bottomRadiusLeft=n.bottomRadiusLeft-n.border;n.bottomRadiusRight=n.bottomRadiusRight-n.border}var k=n.x+n.border;var h=n.y+n.border;var b=n.width-n.border-n.border;var l=n.height-n.border;var c=Math.sqrt((l*l)+(n.offsetLeft*n.offsetLeft));var i=Math.sqrt((l*l)+(n.offsetRight*n.offsetRight));m.beginPath();var j=(n.radiusLeft*n.offsetLeft)/c;var e=(n.radiusLeft*l)/c;var f=n.radiusLeft*0.3333;var g=j*0.3333;var d=e*0.3333;m.moveTo(k+n.offsetLeft-j,h+e);m.bezierCurveTo(k+n.offsetLeft-g,h+d,k+n.offsetLeft+f,h,k+n.offsetLeft+n.radiusLeft,h);var j=(n.radiusRight*n.offsetRight)/i;var e=(n.radiusRight*l)/i;var f=n.radiusRight*0.3333;var g=j*0.3333;var d=e*0.3333;m.lineTo(k+b-n.offsetRight-n.radiusRight,h);m.bezierCurveTo(k+b-n.offsetRight-f,h,k+b-n.offsetRight+g,h+d,k+b-n.offsetRight+j,h+e);var j=(n.bottomRadiusRight*n.offsetRight)/i;var e=(n.bottomRadiusRight*l)/i;var f=n.bottomRadiusRight*0.3333;var g=j*0.3333;var d=e*0.3333;m.lineTo(k+b-j,h+l-e);m.bezierCurveTo(k+b-g,h+l-d,k+b+f,h+l,k+b+n.bottomRadiusRight,h+l);var j=(n.bottomRadiusLeft*n.offsetLeft)/c;var e=(n.bottomRadiusLeft*l)/c;var f=n.bottomRadiusLeft*0.3333;var g=j*0.3333;var d=e*0.3333;m.lineTo(k-n.bottomRadiusLeft,h+l);m.bezierCurveTo(k-f,h+l,k+g,h+l-d,k+j,h+l-e);if(n.stroke){m.stroke()}if(n.fill){m.fill()}}}})(jQuery);